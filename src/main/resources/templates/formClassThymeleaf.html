<!DOCTYPE html>
<html xlmns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- el doc est� en static/CSS/w3@.css no es necesario poner el static y se usa  -->
<link rel="stylesheet" type="text/css" th:href="@{CSS/w3.css}">
<title th:text="${titulo}"></title>
</head>
<body class="w3-container w3-padding w3-lime">
	<div class="w3-bar w3-black w3-padding">
		<a th:href="@{/(name='Desde listar')}"
			class="w3-bar-item w3-hover-green">Inicio</a> <a th:href="@{/listar}"
			class="w3-bar-item w3-hover-green">Listar</a> <a th:href="@{/perfil}"
			class="w3-bar-item w3-hover-green">Perfil</a> <a
			th:href="@{/properties}" class="w3-bar-item w3-hover-green">Properties</a>
		<a th:href="@{/path/cualquier cosa}" class="w3-bar-item w3-hover-green">PathVariable/(Variable)</a> 
		<a th:href="@{/form}" class="w3-bar-item w3-hover-green">Formularios</a> 
		<a th:href="@{/redirect}" class="w3-bar-item w3-hover-green">redirect</a>
		<span th:text="${fecha}" class="w3-right w3-border w3-border-red w3-center w3-padding w3-small"></span>
	</div>
	<h3 th:text="${titulo}"
		class="w3-panel w3-leftbar w3-pale-green w3-center w3-border-green w3-xxlarge w3-round-xlarge"></h3>
		<div class="w3-bar w3-black w3-padding">
		<a th:href="@{/formClass}" class="w3-bar-item w3-hover-green">Fomulario usando clase</a>
		<a th:href="@{/formClassMap}" class="w3-bar-item w3-hover-green">Fomulario usando @Valid</a>
		<a th:href="@{/formClassThymeleaf}" class="w3-bar-item w3-hover-green">Fomulario usando ThymeLeaf</a>
		</div>
 	<div 
		class="w3-pale-blue w3-border w3-border-blue w3-hover-shadow w3-padding">
		<div class="w3-container w3-sand">
			<h3 class="w3-center">
				<strong>Formulario sencillo usando una las etiquetas de Thymeleaf</strong>
			</h3>
		</div>
		<ol>
			<li>Se crea un controlador, en este caso está en FormController y se llama <code
					class="w3-text-blue">  *******</code> que envía está vista llamada formClassThymeleaf
			</li>
			<li>Después de darle a registrar viaja tambien al indexController y busca a:</code>
				<code class="w3-text-blue">public String formPostMap(@Valid UsuarioValido usuariovalido, BindingResult result, Model model) {</code> 
			 	Creando al usuario directament, solo usando los name de los inputs, y asignandolos a las variables de la clase.
			 	 agregando erroes al map que se crea
			</li>
			<li>
				Por último solo queda añadir al usuario a la model, o los errores y usar error para ver los bloques rojos
			</li>
		</ol>
		
		<!-- --------------------------------------------------------------------------------------------------------------------------------- -->		
		
		<!-- Insertarmos el atributo th:object="${usuarioValido}  para usar solo sus campos en los inputs y no usar el nombre de la variable usuarioValido.algo-->
	
		<!-- --------------------------------------------------------------------------------------------------------------------------------------------- -->
		
		<form method="post" th:action="@{/formClassThymeleaf}" th:object="${usuarioValido}">
			<label class="w3-text-teal" for="nombre"><b>Nombre
					usuario</b></label> Usamos thymeleaf para tomar el valor del campo que se envía
			
		<!-- --------------------------------------------------------------------------------------------------------------------------------- -->		
		
		<!-- Se quita name y value, reemplazando value por field que inserta el name y usando el * y solo el campo del obj que se inserta  en la etiqueta form -->
	
		<!-- --------------------------------------------------------------------------------------------------------------------------------- -->		
	
					<input class="w3-input w3-border w3-white w3-border-teal" type="text" id="nombre" th:field="*{nombre}">
		
		<!-- --------------------------------------------------------------------------------------------------------------------------------- -->		
		
		<!-- Usamos ahora th:if="${#fields.hasErrors('nombre')} para saber si contiene errores, y th:errors="*{nombre}" para mostrar el error -->
	
		<!-- --------------------------------------------------------------------------------------------------------------------------------- -->	
  <div th:if="${#fields.hasErrors('nombre')}">
		<div
			class="w3-panel w3-border w3-border-blue w3-hover-shadow w3-padding w3-red w3-display-containerd">
			<span onclick="this.parentElement.style.display='none'"
				class="w3-button w3-text-black w3-right w3-yellow">X</span>
			<p>
				<strong><span th:errors="*{nombre}"></span></strong>
			</p> 
		</div>
	</div>
				 <label
				class="w3-text-teal" for="apellido"><b>Apellido</b></label> 
				<input class="w3-input w3-border w3-white w3-border-teal" type="text" id="apellido" th:field="*{apellido}">
					<div th:if="${#fields.hasErrors('apellido')}">
		<div
			class="w3-panel w3-border w3-border-blue w3-hover-shadow w3-padding w3-red w3-display-containerd">
			<span onclick="this.parentElement.style.display='none'"
				class="w3-button w3-text-black w3-right w3-yellow">X</span>
			<p>
				<strong><span th:errors="*{apellido}" class=""></span></strong>
			</p>
		</div>
	</div>
				
				 <label class="w3-text-teal"
				for="email"><b>Email</b></label> 
				<input class="w3-input w3-border w3-white w3-border-teal" type="email" id="email" th:field="*{email}">
				
				<div th:if="${#fields.hasErrors('email')}">
		<div
			class="w3-panel w3-border w3-border-blue w3-hover-shadow w3-padding w3-red w3-display-containerd">
			<span onclick="this.parentElement.style.display='none'" class="w3-button w3-text-black w3-right w3-yellow">X</span>
			<p>
				<strong><span th:errors="*{email}" class=""></span></strong>
			</p>
		</div>
	</div>
	 <input type="submit"
				class="w3-green w3-margin-top w3-text-white w3-round-xlarge w3-ripple w3-border w3-border-teal"
				value="Registrar" />
				
		</form>
	</div>	
	<h4>Lista de los datos del usuario</h4>
	<ol>
	<li><span th:text="${usuarioValido.nombre.isEmpty()?'No hay nombre':usuarioValido.nombre}"></span></li>
	<li><span th:text="${usuarioValido.apellido.isEmpty()?'No hay apellido':usuarioValido.apellido}"></span></li>
	<li><span th:text="${usuarioValido.email.isEmpty()?'No hay email':usuarioValido.email}"></span></li>
	</ol>
</body>
</html>